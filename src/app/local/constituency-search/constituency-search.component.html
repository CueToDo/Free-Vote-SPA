<div class="tabContainer">
  <div class="tabContent scroller">
    <div class="search">
      <h1>Constituency search</h1>

      <div class="flexRow justify-start amb-3">
        <input
          #trvConstituencySearch
          class="form-control"
          type="text"
          placeholder="constituency name (min 3 letters)"
          [(ngModel)]="constituencySearch"
        />
        <button mat-stroked-button (click)="ConstituencySearch(false)">
          <mat-icon>search</mat-icon>
          lookup
        </button>
        <button mat-stroked-button (click)="clearSearch()">
          <mat-icon>cancel</mat-icon>
          clear
        </button>
      </div>

      <div class="flexRow justify-start amb-3">
        <input
          #trvPostcodeSearch
          class="form-control"
          type="text"
          placeholder="post code (in full)"
          [(ngModel)]="postcodeSearch"
          (keyup.enter)="PostcodeSearch()"
        />
        <button mat-stroked-button (click)="PostcodeSearch()">
          <mat-icon>search</mat-icon>
          lookup
        </button>
        <button mat-stroked-button (click)="clearSearch()">
          <mat-icon>cancel</mat-icon>
          clear
        </button>
      </div>

      <div class="flexRow justify-start amb-5">
        <input
          #trvCandidateSearch
          class="form-control"
          type="text"
          placeholder="candidate name (min 3 letters)"
          [(ngModel)]="candidateSearch"
        />
        <button mat-stroked-button (click)="CandidateSearch(false)">
          <mat-icon>search</mat-icon>
          lookup
        </button>
        <button mat-stroked-button (click)="clearSearch()">
          <mat-icon>cancel</mat-icon>
          clear
        </button>
      </div>

      <p *ngIf="!!error" class="alert alert-danger amb-2">
        {{ error }}
      </p>

      <div
        class="spinner-grow text-primary amb-2"
        role="status"
        *ngIf="searching"
      >
        <div class="visually-hidden">Loading...</div>
      </div>

      <div *ngFor="let constituency of localData.constituencies" class="amb-2">
        <a [routerLink]="constituencyLink(constituency.constituency)">
          <div class="flexRow">
            <div>
              {{ constituency.constituency }}
            </div>
            <div *ngIf="!!constituency.newName">
              <span>(</span>
              <span *ngIf="constituency.constituency == constituency.oldName">{{
                constituency.newName
              }}</span>
              <span *ngIf="constituency.constituency == constituency.newName">{{
                constituency.oldName
              }}</span>
              <span>)</span>
            </div>
          </div>
        </a>
      </div>

      <div
        *ngFor="let candidate of localData.candidateSearchResults"
        class="amb-2"
      >
        <p>{{ candidate.name }}, {{ candidate.party }}</p>
        <p class="aml-2">
          <a
            [routerLink]="
              constituencyDateLink(
                candidate.constituency,
                candidate.lastElectionDate,
                candidate.name
              )
            "
            >{{ candidate.constituency }}, {{ candidate.lastElectionDate }}</a
          >
        </p>
      </div>

      <div class="center mt-5 mb-5">
        <a
          href="https://www.ordnancesurvey.co.uk/election-maps/gb/"
          target="_blank"
          >Ordnance Survey Election Maps</a
        >
        <a
          href="https://commonslibrary.parliament.uk/boundary-review-2023-which-seats-will-change/"
          target="_blank"
          >parliament.uk boundary review 2023</a
        >
        <a
          href="https://www.google.com/maps/d/viewer?mid=1JTtVQGRemi1wbL9J8OpQ48EXv7gpG4Q&hl=en"
          target="_blank"
        >
          Google maps 2023 constituency review
        </a>
      </div>
    </div>
  </div>
</div>
